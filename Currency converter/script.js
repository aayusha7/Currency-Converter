currency_list = [
    ["AED", "United Arab Emirates Dirhams"],
    ["AFN", "Afghan Afghani"],
    ["ALL", "Albanian Lek"],
    ["AMD", "Armenian Dram"],
    ["ANG", "Netherlands Antillean Guilder"],
    ["AOA", "Angolan Kwanza"],
    ["ARS", "Argentine Peso"],
    ["AUD", "Australian Dollar"],
    ["AWG", "Aruban Florin"],
    ["AZN", "Azerbaijani Manat"],
    ["BAM", "Bosnia Herzegovina Convertible Mark"],
    ["BBD", "Barbadian Dollar"],
    ["BGN", "Bulgarian Lev"],
    ["BHD", "Bahraini Dinar"],
    ["BIF", "Burundian Franc"],
    ["BMD", "Bermudan Dollar"],
    ["BOB", "Bolivian Boliviano"],
    ["BRL", "Brazilian Real"],
    ["BSD", "Bahamian Dollar"],
    ["BWP", "Botswanan Pula"],
    ["BYN", "Belarusian Ruble"],
    ["BZD", "Belize Dollar"],
    ["CDF", "Congolese Franc"],
    ["CHF", "Swiss Franc"],
    ["CLP", "Chilean Peso"],
    ["CNY", "Chinese Yuan"],
    ["COP", "Colombian Peso"],
    ["CRC", "Costa Rican Colón"],
    ["CUP", "Cuban Peso"],
    ["CZK", "Czech Koruna"],
    ["DJF", "Djiboutian Franc"],
    ["DKK", "Danish Krone"],
    ["DOP", "Dominican Peso"],
    ["DZD", "Algerian Dinar"],
    ["EGP", "Egyptian Pound"],
    ["ERN", "Eritrean Nakfa"],
    ["EUR", "Euro"],
    ["FJD", "Fijian Dollar"],
    ["FKP", "Falkland Islands Pound"],
    ["GBP", "British Pound"],
    ["GEL", "Georgian Lari"],
    ["GHS", "Ghanaian Cedi"],
    ["GIP", "Gibraltar Pound"],
    ["GMD", "Gambian Dalasi"],
    ["GNF", "Guinean Franc"],
    ["GTQ", "Guatemalan Quetzal"],
    ["GYD", "Guyanaese Dollar"],
    ["HKD", "Hong Kong Dollar"],
    ["HNL", "Honduran Lempira"],
    ["HRK", "Croatian Kuna"],
    ["HTG", "Haitian Gourde"],
    ["HUF", "Hungarian Forint"],
    ["IDR", "Indonesian Rupiah"],
    ["ILS", "Israeli New Shekel"],
    ["INR", "Indian Rupee"],
    ["IQD", "Iraqi Dinar"],
    ["IRR", "Iranian Rial"],
    ["ISK", "Icelandic Króna"],
    ["JMD", "Jamaican Dollar"],
    ["JOD", "Jordanian Dinar"],
    ["JPY", "Japanese Yen"],
    ["KES", "Kenyan Shilling"],
    ["KGS", "Kyrgystani Som"],
    ["KHR", "Cambodian Riel"],
    ["KMF", "Comorian Franc"],
    ["KRW", "South Korean Won"],
    ["KWD", "Kuwaiti Dinar"],
    ["KYD", "Cayman Islands Dollar"],
    ["KZT", "Kazakhstani Tenge"],
    ["LAK", "Laotian Kip"],
    ["LBP", "Lebanese Pound"],
    ["LKR", "Sri Lankan Rupee"],
    ["LRD", "Liberian Dollar"],
    ["LSL", "Lesotho Loti"],
    ["LYD", "Libyan Dinar"],
    ["MAD", "Moroccan Dirham"],
    ["MDL", "Moldovan Leu"],
    ["MGA", "Malagasy Ariary"],
    ["MKD", "Macedonian Denar"],
    ["MMK", "Myanmar Kyat"],
    ["MNT", "Mongolian Tugrik"],
    ["MOP", "Macanese Pataca"],
    ["MRU", "Mauritanian Ouguiya"],
    ["MUR", "Mauritian Rupee"],
    ["MVR", "Maldivian Rufiyaa"],
    ["MWK", "Malawian Kwacha"],
    ["MXN", "Mexican Peso"],
    ["MYR", "Malaysian Ringgit"],
    ["MZN", "Mozambican Metical"],
    ["NAD", "Namibian Dollar"],
    ["NGN", "Nigerian Naira"],
    ["NIO", "Nicaraguan Córdoba"],
    ["NOK", "Norwegian Krone"],
    ["NPR", "Nepalese Rupee"],
    ["NZD", "New Zealand Dollar"],
    ["OMR", "Omani Rial"],
    ["PAB", "Panamanian Balboa"],
    ["PGK", "Papua New Guinean Kina"],
    ["PHP", "Philippine Peso"],
    ["PKR", "Pakistani Rupee"],
    ["PLN", "Polish Zloty"],
    ["PYG", "Paraguayan Guarani"],
    ["QAR", "Qatari Riyal"],
    ["RON", "Romanian Leu"],
    ["RSD", "Serbian Dinar"],
    ["RUB", "Russian Ruble"],
    ["RWF", "Rwandan Franc"],
    ["SAR", "Saudi Riyal"],
    ["SBD", "Solomon Islands Dollar"],
    ["SCR", "Seychellois Rupee"],
    ["SDG", "Sudanese Pound"],
    ["SEK", "Swedish Krona"],
    ["SGD", "Singapore Dollar"],
    ["SHP", "St. Helena Pound"],
    ["SLL", "Sierra Leonean Leone (1964—2022)"],
    ["SOS", "Somali Shilling"],
    ["SRD", "Surinamese Dollar"],
    ["SSP", "South Sudanese Pound"],
    ["STN", "São Tomé Príncipe Dobra"],
    ["SYP", "Syrian Pound"],
    ["SZL", "Swazi Lilangeni"],
    ["THB", "Thai Baht"],
    ["TJS", "Tajikistani Somoni"],
    ["TMT", "Turkmenistani Manat"],
    ["TND", "Tunisian Dinar"],
    ["TOP", "Tongan Paanga"],
    ["TRY", "Turkish Lira"],
    ["TTD", "Trinidad Tobago Dollar"],
    ["TWD", "New Taiwan Dollar"],
    ["TZS", "Tanzanian Shilling"],
    ["UAH", "Ukrainian Hryvnia"],
    ["UGX", "Ugandan Shilling"],
    ["USD", "US Dollar"],
    ["UYU", "Uruguayan Peso"],
    ["UZS", "Uzbekistani Som"],
    ["VES", "Venezuelan Bolívar"],
    ["VND", "Vietnamese Dong"],
    ["VUV", "Vanuatu Vatu"],
    ["WST", "Samoan Tala"],
    ["XAF", "Central African CFA Franc"],
    ["XCD", "East Caribbean Dollar"],
    ["XOF", "West African CFA Franc"],
    ["XPF", "CFP Franc"],
    ["YER", "Yemeni Rial"],
    ["ZAR", "South African Rand"],
    ["ZMW", "Zambian Kwacha"],
    ["ZWL", "Zimbabwean Dollar (2009)"]
];

// decleare initial convertion afount from fromCountry to us dollar in fetch 
// let initialConversion = 0;
// let finalConversion = 0;


  // Get the dropdown element
  var dropdown = document.getElementById("countryFrom").value;
  
  
  // populate country from dropdown
  currency_list.forEach(function(currency) {
       var option = document.createElement("option");
       option.value = currency[0];
       option.text = currency[1];
       document.getElementById("countryFrom").appendChild(option);
       //countryTo.add(option);
   });
 
    // populate country to dropdown box
    currency_list.forEach(function(currency) {
        var option = document.createElement("option");
        option.value = currency[0];
        option.text = currency[1];
        document.getElementById("countryTo").appendChild(option);
        //countryTo.add(option);
    });




function checkforblank() {

   const value = document.getElementById('amount').value;
   if (value === "") {
       alert('Please input a value');
       return false;
   }
   firstFetchdata().then((initialConversion) => {
    finalFetchdata(initialConversion);
});
   
  
}

async function firstFetchdata(){

    const fromCurrency = document.getElementById("countryFrom").value;
    //const toCurrency = document.getElementById("countryTo").value;
    const amount = document.getElementById("amount").value;
const response = await fetch(`https://v6.exchangerate-api.com/v6/730260613b79ea40f83744b0/latest/USD`)
const data = await response.json();

if (data.result==="success"){

    const rate = data.conversion_rates[fromCurrency];
   const initialConversion = amount / rate;
    return initialConversion;
 // initialConversion=  conversiontoDollar(amount,fromCurrency).toFixed(2);

//     const rate = data.conversion_rates[toCurrency];
//     const convertedAmount = (amount * rate).toFixed(2);
    //document.getElementById("result").innerText = `${amount} ${fromCurrency} = ${calcutationUsdToCountry} ${toCurrency}`;
 } else {
   document.getElementById("result").innerText = "Error fetching conversion rate.";
   throw new Error("Error fetching conversion rate.");
 }


}


 async function finalFetchdata(initialConversion){

    const fromCurrency = document.getElementById("countryFrom").value;
    const toCurrency = document.getElementById("countryTo").value;
    const amount = document.getElementById("amount").value;
const response = await fetch(`https://v6.exchangerate-api.com/v6/730260613b79ea40f83744b0/latest/USD`)
const data = await response.json();

if (data.result==="success"){

    const rate = data.conversion_rates[toCurrency];
    const finalConversion = initialConversion * rate;
  //let finalConversion=  conversionFromDollar(amount,fromCurrency).toFixed(2);

//     const rate = data.conversion_rates[toCurrency];
//     const convertedAmount = (amount * rate).toFixed(2);
    document.getElementById("result").innerText = `${amount} ${fromCurrency} = ${finalConversion.toFixed(2)} ${toCurrency}`;
 } else {
   document.getElementById("result").innerText = "Error fetching conversion rate.";
 }
}

   /** 

// function conversiontoDollar(inputAmount,countryFromName){
// let result = 1.0;
// const rate = data.conversion_rates[countryFromName];
//  result = inputAmount / rate;
// return result;
// }
// function conversionFromDollar(inputAmount,countryToName){
//     let result = 1.0;
//     const rate = data.conversion_rates[countryToName];
//      result = inputAmount / rate;
//     return result;


// }





//async function firstFetchdata() {
//     const fromCurrency = document.getElementById("countryFrom").value;
//     const amount = (document.getElementById("amount").value);
//     const response = await fetch(`https://v6.exchangerate-api.com/v6/730260613b79ea40f83744b0/latest/${fromCurrency}`);
//     const data = await response.json();

//     if (data.result === "success") {
//         const rateToUSD = data.conversion_rates["USD"];
//         const initialConversion = amount / rateToUSD;
//         return initialConversion;
//     } else {
//         document.getElementById("result").innerText = "Error fetching conversion rate.";
//         throw new Error("Error fetching conversion rate.");
//     }
// }

// async function finalFetchdata(initialConversion) {
//     const toCurrency = document.getElementById("countryTo").value;
//     const response = await fetch(`https://v6.exchangerate-api.com/v6/730260613b79ea40f83744b0/latest/USD`);
//     const data = await response.json();

//     if (data.result === "success") {
//         const rateFromUSD = data.conversion_rates[toCurrency];
//         const finalConversion = initialConversion * rateFromUSD;
//         document.getElementById("result").innerText = `${initialConversion.toFixed(2)} USD = ${finalConversion.toFixed(2)} ${toCurrency}`;
//     } else {
//         document.getElementById("result").innerText = "Error fetching conversion rate.";
//     }
// }






























// function submitForm(){
//   //ev.preventDefault();
//   const countryFromName = document.getElementById("countryFrom").value;
//   const countryTo = document.getElementById("countryTo").value;
//   const inputAmount =  parseFloat(document.getElementById("amount").value);
//   const toDollarConvertedAmount = parseFloat(conversiontoDollar(inputAmount,countryFromName));
// const finalConvertedAmount = parseFloat(conversionFromDollar(toDollarConvertedAmount,countryTo));
//   document.getElementById('result').innerHTML = `The conversion of ${inputAmount} in ${countryFromName} is ${finalConvertedAmount.toFixed(2)} in ${countryTo}.`;
//  // document.getElementById('result').innerHTML = `This is the error.`;
// }

// function conversiontoDollar(inputAmount,countryFromName){
//     let result = 1.0;
//       for (const [key, value] of Object.entries(currency_rate)) {
//                 if(key==countryFromName){
//                     result = inputAmount / value;
//                }
//     }
//     return result;
//     }
//     function conversionFromDollar(inputAmount,countryToName){
//         let result = 1.0;
//           for (const [key, value] of Object.entries(currency_rate)) {
//                     if(key==countryToName){
//                         result = inputAmount * value;
//                    }
//         }
//         return result;}}
*/